---
  # Fill in vars.yml before running

  # Post-provisioning localhost
  - name: "SSH key Local"
    hosts: localhost
    vars_files:
      - vars/vars.yml
    tasks:
    - name: Install SSH private Key to localhost
      include: tasks/ssh_key_local.yml

# Post-provisioning VM
  - name: "Provision Enviorment"
    hosts: linux
    become: true
    vars_files:
      - vars/vars.yml
    tasks:

    - name: Collect Server IP
      debug:
        msg: "{{ ansible_ssh_host }}"

    - name: Install Required Packages
      include: tasks/packages.yml

    - name: Install Docker from repo
      include: tasks/docker.yml

    - name: Setup SSH security
      include: tasks/ssh_security.yml

    - name: Install Containers
      include: tasks/containers.yml

# Debug Block
  - name: "SSH key Local 2"
    hosts: localhost
    vars_files:
      - vars/vars.yml
    tasks:
    
    - name: Display Private Key
      debug:
        msg: "Here is your Private Key:{{ ssh_key_private }}"

    - name: Display Pub Key
      debug:
        msg: "Here is your Pub Key: {{ ssh_key_pub }}"
